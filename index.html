<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Blackjack: –®—É—Ä–∏–∫ vs –ö—É—Ä–∏—Ü–∞ 2.0</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1f2947" />
  <style>
    :root{
      --radius:14px;
      --shadow:0 30px 60px rgba(0,0,0,.35);
      --bg1:#1f2947;
      --bg2:#2f3d67;
      --accent:#ffd74f;
      --accent2:#ff9060;
      --text:#f0f2fa;
      --muted:#9aa2cc;
      --glass:rgba(255,255,255,0.05);
      --transition:.35s cubic-bezier(.3,.1,.2,1);
    }
    *{box-sizing:border-box;}
    body{margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif; background: linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 80%); color:var(--text); min-height:100dvh; padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left); -webkit-font-smoothing:antialiased; -webkit-user-select:none; }
    .app{max-width:1024px; margin:0 auto; padding:1rem; display:flex; flex-direction:column; gap:12px; position:relative; height:calc(var(--vh,1vh)*100);}
    .top-bar{display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; gap:8px;}
    .title{display:flex; align-items:center; gap:8px; font-size:1.8rem; font-weight:700;}
    .subtitle{font-size:.85rem; color:var(--muted);}
    .game{background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.08); border-radius:24px; flex:1; display:flex; flex-direction:column; padding:1rem; position:relative; overflow:hidden; backdrop-filter:blur(14px);}
    .players{display:flex; flex-wrap:wrap; gap:14px; margin-top:6px; flex:1;}
    .panel{flex:1 1 300px; background:var(--glass); border:1px solid rgba(255,255,255,0.09); padding:14px; border-radius:18px; position:relative; display:flex; flex-direction:column;}
    .badge{background:linear-gradient(135deg,var(--accent),var(--accent2)); padding:6px 14px; border-radius:999px; font-size:.55rem; text-transform:uppercase; letter-spacing:1.2px; display:inline-block;}
    .flex{display:flex; align-items:center; gap:8px;}
    .score{font-size:1.1rem; font-weight:700;}
    .cards{display:flex; gap:-16px; margin-top:8px; min-height:110px; position:relative;}
    .card{width:78px; height:110px; border-radius:14px; background:#fff; position:relative; display:flex; flex-direction:column; justify-content:space-between; padding:8px; font-size:14px; font-weight:600; color:#222; box-shadow:0 24px 60px rgba(0,0,0,.3); transform-origin:center; transition:transform var(--transition), filter .2s; will-change:transform;
      perspective:800px;
    }
    .card .corner{display:flex; flex-direction:column;}
    .card .suit-large{font-size:32px; line-height:1;}
    .card.red{color:#d4477a;}
    .card.back{background: linear-gradient(135deg,#444c7a,#2a3259); color:#fff;}
    .controls{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;}
    button{display:flex; align-items:center; gap:6px; border:none; cursor:pointer; padding:12px 18px; border-radius:12px; font-weight:700; font-size:.9rem; background:rgba(255,255,255,.1); color:var(--text); position:relative; overflow:hidden; transition:filter .2s, transform .2s; backdrop-filter:blur(6px);}
    button svg{width:18px; height:18px; flex-shrink:0;}
    button:hover{filter:brightness(1.1); transform:translateY(-1px);}
    .btn-primary{background:var(--accent); color:#1b1427;}
    .btn-secondary{background:rgba(255,255,255,.08);}
    .message{margin-top:6px; background:rgba(255,255,255,0.07); padding:12px 16px; border-radius:14px; font-size:.9rem; display:inline-block; position:relative;}
    .result-box{margin-top:10px; background:rgba(255,255,255,0.05); padding:12px 16px; border-radius:14px; font-size:1rem; font-weight:600; min-height:38px;}
    .small{font-size:.65rem;}
    .chicken-wrapper{display:flex; align-items:start; gap:10px;}
    .chicken{width:120px; height:150px; position:relative; flex-shrink:0;}
    .speech{position:absolute; top:-8px; left:110px; background:#fff3b8; padding:8px 14px; border-radius:14px; font-size:.7rem; color:#403d4f; font-weight:600; box-shadow:0 18px 40px rgba(0,0,0,.2); max-width:180px;}
    .footer{margin-top:6px; display:flex; flex-wrap:wrap; justify-content:space-between; font-size:.6rem; gap:10px;}
    .background-anim{position:absolute; inset:0; pointer-events:none;}
    .confetti{position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; overflow:hidden;}
    @media (max-width:1000px){.title{font-size:1.4rem;} .card{width:64px; height:90px;} }
    .glow{position:relative;}
    .glow:before{content:''; position:absolute; inset:0; filter:blur(24px); background:radial-gradient(circle at 30% 30%, rgba(255,215,79,.6), transparent 60%); mix-blend-mode:overlay; border-radius:inherit;}
    /* Floating particle/backdrop */
    .particle{position:absolute; border-radius:50%; opacity:.2; will-change:transform, opacity;}
    .chip{position:absolute; border-radius:50%; border:2px solid #fff; width:20px; height:20px; display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:700;}
    .icon-small{width:16px; height:16px;}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Blackjack —Å –∫—É—Ä–∏—Ü–µ–π-–∫—Ä—É–ø—å–µ">
    <div class="top-bar">
      <div class="title">üÉè Blackjack 2.0 ‚Äî –®—É—Ä–∏–∫ vs –ö—É—Ä–∏—Ü–∞ <span style="font-size:.8rem; margin-left:4px;">(Hardcore Mode)</span></div>
      <div class="subtitle">–°–º–µ—à–Ω–æ–π –∫—Ä—É–ø—å–µ-–∫—É—Ä–∏—Ü–∞, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ –ø–æ–¥ iPhone/Safari, –∞–Ω–∏–º–∞—Ü–∏–∏, —à—É—Ç–∫–∏ –∏ –ø–æ–¥–∫–æ–ª—ã. –ì–æ—Ç–æ–≤ –∏–≥—Ä–∞—Ç—å?</div>
    </div>
    <div class="game">
      <canvas class="background-anim" id="bg-canvas"></canvas>
      <div class="players">
        <div class="panel dealer-area" aria-label="–ö—Ä—É–ø—å–µ">
          <div class="flex" style="justify-content:space-between;">
            <div><div class="badge">–ö—Ä—É–ø—å–µ</div></div>
            <div class="chicken-wrapper">
              <div class="chicken" aria-label="–ö—É—Ä–∏—Ü–∞-–∫—Ä—É–ø—å–µ">
                <!-- SVG –∫—É—Ä–∏—Ü—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
                <svg viewBox="0 0 160 180" width="100%" height="100%" aria-hidden="true">
                  <ellipse cx="80" cy="110" rx="50" ry="55" fill="#ffe699" />
                  <circle cx="80" cy="60" r="35" fill="#ffe699" />
                  <circle cx="68" cy="55" r="6" fill="#222" />
                  <circle cx="92" cy="55" r="6" fill="#222" />
                  <polygon points="80,70 70,80 90,80" fill="#ff9f43" />
                  <path d="M60,42 q10 -25 20 0 q10 -25 20 0 q10 -25 20 0" fill="#ff5f5f" />
                  <g class="wing" transform="translate(25,100)">
                    <ellipse cx="40" cy="10" rx="25" ry="40" fill="#fff3d9" />
                  </g>
                  <g class="wing" transform="translate(65,100) scale(-1,1)">
                    <ellipse cx="40" cy="10" rx="25" ry="40" fill="#fff3d9" />
                  </g>
                  <rect x="65" y="160" width="6" height="14" fill="#ff9f43" />
                  <rect x="89" y="160" width="6" height="14" fill="#ff9f43" />
                </svg>
                <div class="speech" id="chicken-speech">–ü—Ä–∏–≤–µ—Ç, –®—É—Ä–∏–∫! –ì–æ—Ç–æ–≤ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å?</div>
              </div>
            </div>
          </div>
          <div class="status small">–ö—Ä—É–ø—å–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: <span id="dealer-score">?</span></div>
          <div class="cards" aria-label="–ö–∞—Ä—Ç—ã –∫—Ä—É–ø—å–µ" id="dealer-cards"></div>
          <div class="result-box" id="dealer-result">&nbsp;</div>
        </div>
        <div class="panel player-area" aria-label="–ò–≥—Ä–æ–∫ –®—É—Ä–∏–∫">
          <div class="flex" style="justify-content:space-between;">
            <div><div class="badge">–ò–≥—Ä–æ–∫</div> <span style="margin-left:6px; font-weight:700;">–®—É—Ä–∏–∫</span></div>
            <div class="small">–£—Ä–æ–≤–µ–Ω—å: <span id="difficulty">Hardmode</span></div>
          </div>
          <div class="score">–°—á—ë—Ç: <span id="player-score">0</span></div>
          <div class="cards" aria-label="–ö–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞" id="player-cards"></div>
          <div class="controls">
            <div style="display:flex; gap:8px; flex-wrap:wrap;">
              <button id="btn-hit" class="btn-primary" aria-label="–í–∑—è—Ç—å –∫–∞—Ä—Ç—É"><svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>–í–∑—è—Ç—å</button>
              <button id="btn-stand" class="btn-secondary" aria-label="–°—Ç–æ–ø"><svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h12v16H6z"/></svg>–°—Ç–æ–ø</button>
              <button id="btn-new" class="btn-primary" aria-label="–ù–æ–≤–∞—è –∏–≥—Ä–∞"><svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4v6h6M20 20v-6h-6"/><circle cx="12" cy="12" r="9"/></svg>–ù–æ–≤–∞—è</button>
            </div>
          </div>
          <div class="result-box" id="player-result">&nbsp;</div>
        </div>
      </div>
      <div class="message" id="log">–ù–∞–∂–º–∏ "–ù–æ–≤–∞—è", –®—É—Ä–∏–∫ ‚Äî –ø–æ—Ä–∞ –ø–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä–∏—Ü–µ, –∫—Ç–æ —Ç—É—Ç –±–æ—Å—Å. üéÆüêî</div>
      <div class="footer">
        <div>–ü—Ä–æ—Ç–æ—Ç–∏–ø: –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ Safari/iPhone, –∞–Ω–∏–º–∞—Ü–∏–∏, —à—É—Ç–∫–∏ –≤ —Å—Ç–∏–ª–µ –≥–µ–π–º–∏–Ω–≥–∞ –∏ –º–æ–ª–¥–∞–≤—Å–∫–∏–µ –ø–æ–¥–∫–æ–ª—ã.</div>
        <div class="small">¬´»òuriku, dai la joc, nu la somn!¬ª ‚Äî –®—É—Ä–∏–∫, –∏–≥—Ä–∞–π, –Ω–µ —Å–ø–∏!</div>
      </div>
      <div class="confetti" id="confetti-container"></div>
    </div>
  </div>
  <template id="card-template">
    <div class="card">
      <div class="corner top"><div class="value"></div><div class="suit"></div></div>
      <div class="center suit-large"></div>
      <div class="corner bottom" style="transform: rotate(180deg);"><div class="value"></div><div class="suit"></div></div>
    </div>
  </template>
  <script>
    // Fix mobile 100vh
    (function(){ function setVh(){document.documentElement.style.setProperty('--vh', window.innerHeight * 0.01 + 'px');} window.addEventListener('resize', setVh); setVh(); })();

    // Blackjack logic
    const suits=['‚ô†','‚ô•','‚ô¶','‚ô£'];
    const values=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    let deck=[], playerHand=[], dealerHand=[]; let inRound=false;

    // DOM
    const playerCardsEl=document.getElementById('player-cards');
    const dealerCardsEl=document.getElementById('dealer-cards');
    const playerScoreEl=document.getElementById('player-score');
    const dealerScoreEl=document.getElementById('dealer-score');
    const logEl=document.getElementById('log');
    const playerResultEl=document.getElementById('player-result');
    const dealerResultEl=document.getElementById('dealer-result');
    const chickenSpeech=document.getElementById('chicken-speech');
    const confettiContainer=document.getElementById('confetti-container');

    document.getElementById('btn-new').addEventListener('click', startGame);
    document.getElementById('btn-hit').addEventListener('click', playerHit);
    document.getElementById('btn-stand').addEventListener('click', playerStand);

    function createDeck(){const d=[]; for(const s of suits){ for(const v of values){ d.push({suit:s,value:v}); } } return d; }
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }
    function computeBestScore(hand){ let total=0, aces=0; for(const c of hand){ if(c.value==='A'){ aces++; total+=11;} else if(['J','Q','K'].includes(c.value)){ total+=10;} else { total+=parseInt(c.value);} } while(total>21 && aces>0){ total-=10; aces--; } return total; }

    function renderCard(cardObj, hidden=false){
      const tpl=document.getElementById('card-template');
      const el=tpl.content.firstElementChild.cloneNode(true);
      if(hidden){ el.classList.add('back'); el.innerHTML=''; return el; }
      el.querySelectorAll('.value').forEach(x=>x.textContent=cardObj.value);
      el.querySelectorAll('.suit').forEach(x=>x.textContent=cardObj.suit);
      el.querySelector('.suit-large').textContent=cardObj.suit;
      if(cardObj.suit==='‚ô•' || cardObj.suit==='‚ô¶'){ el.classList.add('red'); }
      // flip in animation
      el.style.transform='rotateY(360deg)';
      setTimeout(()=>{ el.style.transform='none'; },10);
      return el;
    }
    function dealCard(toPlayer=true, hidden=false){ if(deck.length===0) deck=shuffle(createDeck()); const card=deck.pop(); if(toPlayer){ playerHand.push(card); const c=renderCard(card,false); c.classList.add('deal-animate'); playerCardsEl.appendChild(c); } else { dealerHand.push(card); const c=hidden?renderCard(card,true):renderCard(card,false); c.classList.add('deal-animate'); dealerCardsEl.appendChild(c);} updateScores(); }
    function updateScores(){ playerScoreEl.textContent=computeBestScore(playerHand); let shown=[]; if(dealerCardsEl.children.length>0){ if(dealerCardsEl.children[1] && dealerCardsEl.children[1].classList.contains('back')){ shown=[dealerHand[0]];} else shown=dealerHand; } dealerScoreEl.textContent=computeBestScore(shown); }
    function clearTable(){ playerHand=[]; dealerHand=[]; playerCardsEl.innerHTML=''; dealerCardsEl.innerHTML=''; playerResultEl.textContent=''; dealerResultEl.textContent=''; dealerScoreEl.textContent='?'; playerScoreEl.textContent='0'; }

    function startGame(){ inRound=true; clearTable(); deck=shuffle(createDeck()); dealCard(true); dealCard(true); dealCard(false); dealCard(false,true); showLog('–ù–æ–≤–∞—è –∏–≥—Ä–∞. –®—É—Ä–∏–∫, —Å–¥–µ–ª–∞–π —Ö–æ–¥ ‚Äî –≤–æ–∑—å–º–∏ –∏–ª–∏ —Å—Ç–æ–ø!'); chickenSay(randomLine('start')); }
    function playerHit(){ if(!inRound) return; dealCard(true); showLog('–®—É—Ä–∏–∫ –±–µ—Ä—ë—Ç –∫–∞—Ä—Ç—É... ' + randomLine('hit')); if(computeBestScore(playerHand)>21){ endRound('player-bust'); } }
    function playerStand(){ if(!inRound) return; showLog('–®—É—Ä–∏–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è. –ö—É—Ä–∏—Ü–∞ –≥–æ—Ç–æ–≤–∏—Ç—Å—è...'); revealDealerHidden(); dealerPlay(); }
    function revealDealerHidden(){ if(dealerCardsEl.children[1] && dealerCardsEl.children[1].classList.contains('back')){ dealerCardsEl.children[1].replaceWith(renderCard(dealerHand[1],false)); } updateScores(); }
    function dealerPlay(){ let score=computeBestScore(dealerHand); while(score<17){ dealCard(false); score=computeBestScore(dealerHand); } setTimeout(()=>evaluateWinner(),350); }
    function evaluateWinner(){ const playerScore=computeBestScore(playerHand); const dealerScore=computeBestScore(dealerHand); if(dealerScore>21){ endRound('dealer-bust'); } else if(playerScore>21){ endRound('player-bust'); } else if(playerScore>dealerScore){ endRound('player-win'); } else if(playerScore<dealerScore){ endRound('dealer-win'); } else endRound('push'); }

    function endRound(reason){ inRound=false; const playerScore=computeBestScore(playerHand); const dealerScore=computeBestScore(dealerHand); let msg=''; switch(reason){
      case 'player-bust': msg='–®—É—Ä–∏–∫ –ø–µ—Ä–µ–±—Ä–∞–ª ‚Äî –∫—É—Ä–∏—Ü–∞ –ª–∏–∫—É–µ—Ç!'; playerResultEl.textContent='–ü—Ä–æ–∏–≥—Ä—ã—à'; dealerResultEl.textContent='–ü–æ–±–µ–¥–∞'; break;
      case 'dealer-bust': msg='–ö—É—Ä–∏—Ü–∞ –ø–µ—Ä–µ–±—Ä–∞–ª–∞ ‚Äî –®—É—Ä–∏–∫ —Å–æ–∫—Ä—É—à–∞–µ—Ç!'; playerResultEl.textContent='–ü–æ–±–µ–¥–∞'; dealerResultEl.textContent='–ü—Ä–æ–∏–≥—Ä—ã—à'; break;
      case 'player-win': msg='–®—É—Ä–∏–∫ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç!'; playerResultEl.textContent='–ü–æ–±–µ–¥–∞'; dealerResultEl.textContent='–ü—Ä–æ–∏–≥—Ä—ã—à'; break;
      case 'dealer-win': msg='–ö—É—Ä–∏—Ü–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç, –±–µ–π-–±–µ–≥–∏!'; playerResultEl.textContent='–ü—Ä–æ–∏–≥—Ä—ã—à'; dealerResultEl.textContent='–ü–æ–±–µ–¥–∞'; break;
      case 'push': msg='–ù–∏—á—å—è. –î–∞–∂–µ –∫—É—Ä–∏—Ü–∞ –≤ —à–æ–∫–µ.'; playerResultEl.textContent='–ù–∏—á—å—è'; dealerResultEl.textContent='–ù–∏—á—å—è'; break;
    }
    revealDealerHidden(); showLog(`${msg} (–®—É—Ä–∏–∫: ${playerScore}, –ö—É—Ä–∏—Ü–∞: ${dealerScore}) ` + randomLine(reason)); animateChickenReaction(reason); if(reason==='player-win' || reason==='dealer-bust') celebrateConfetti(); }
    function showLog(txt){ logEl.textContent=txt; }
    function chickenSay(text){ chickenSpeech.textContent=text; chickenSpeech.classList.add('shake'); setTimeout(()=>chickenSpeech.classList.remove('shake'),500); }
    function animateChickenReaction(reason){ const svg=document.querySelector('.chicken svg'); if(reason==='player-win' || reason==='dealer-bust'){ svg.classList.add('shake'); setTimeout(()=>svg.classList.remove('shake'),600); } else if(reason==='dealer-win' || reason==='player-bust'){ // –º–∏–Ω–∏-—ç—Ñ—Ñ–µ–∫—Ç –≥—Ä—É—Å—Ç–∏
      svg.style.filter='brightness(.9)'; setTimeout(()=>{ svg.style.filter=''; },500);
    } }

    // –Æ–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—Ä–∞–∑—ã, –≤–∫–ª—é—á–∞—è –º–æ–ª–¥–∞–≤—Å–∫–∏–µ
    function randomLine(context){ const lines={
      'start':["»òuriku, dai la joc! –ö—É—Ä–æ—á–∫–∞ –∂–¥—ë—Ç —Ç–≤–æ–∏—Ö —Ö–æ–¥–æ–≤.","–ì–æ—Ç–æ–≤—å—Å—è, –®—É—Ä–∏–∫, –∫—É—Ä–∏—Ü–∞ —á–∏—Ç–∞–µ—Ç —Ç–≤–æ–∏ –∫–∞—Ä—Ç—ã, –∫–∞–∫ —á–∏—Ç–∞–µ—Ç –º–∞–Ω–≥—É –∏–≥—Ä–æ–∫ –±—ã–∫–∞.","–°—Ç–∞–≤–∏–º –Ω–∞ Hardmode ‚Äî –Ω–µ –ø–æ–¥–≤–µ–¥–∏, —á–µ–º–ø–∏–æ–Ω!"],
      'hit':["–ö—Ä–∏—Ç? –ò–ª–∏ –ª–∞–≥? –ë–µ—Ä—ë–º –µ—â—ë!","–ú–æ–∂–µ—à—å –µ—â—ë, –®—É—Ä–∏–∫, –∫—É—Ä–∏—Ü–∞ –ª—é–±–∏—Ç —Ä–∏—Å–∫.","–©–∞—Å –±—É–¥–µ—Ç —Ñ–ª–æ–ø ‚Äî –¥–µ—Ä–∂–∏—Å—å!","–≠—Ç–æ –∫–∞–∫ –≤ —Ä–µ–π–¥–µ: –ª–∏–±–æ –ª—É—Ç, –ª–∏–±–æ –≤–∞–π–ø.","Ai noroc, sau doar –∏–Ω—Ç—É–∏—Ü–∏—è?"],
      'player-win':["GG WP! –ö—É—Ä–æ—á–∫–∞ –≤ —à–æ–∫–µ.","–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–∏–≥—Ä–∞–ª, —Ç—ã —Å–ª–æ–º–∞–ª –µ—ë RNG!","–®—É—Ä–∏–∫, —Ç—ã –∫–∞–∫ –ø—Ä–æ–∫–∞—á–∞–Ω–Ω—ã–π –∏–≥—Ä–æ–∫: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–±–µ–¥–∞!"],
      'dealer-win':["–ö—É—Ä–∏—Ü–∞ –≥–æ–≤–æ—Ä–∏—Ç: '–ú–æ–∂–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑, –®—É—Ä–∏–∫?'","–ß–µ—Ä—Ç, –®—É—Ä–∏–∫, —ç—Ç–æ –±—ã–ª —Ñ–µ–π–ª-–º–∞–≥–∏—è –∫—É—Ä–∏—Ü—ã.","–¢—ã –±—ã–ª –±–ª–∏–∑–∫–æ, –Ω–æ –∫—É—Ä–∏—Ü–∞ –≤–∑—è–ª–∞ —Å–≤–æ—ë.","Ai pierdut, dar nu te supƒÉra, data viitoare o sƒÉ fie mai bine!"],
      'push':["–ù–∏—á—å—è ‚Äî –Ω–∏—á—Ç–æ –Ω–µ —Ä–µ—à–µ–Ω–æ. –ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞!","–ú—ã –æ–±–∞ –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ, –∫–∞–∫ –¥–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–±–æ—Ä–∫–∏."]
    }; const arr=lines[context]||["–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –®—É—Ä–∏–∫..."]; return arr[Math.floor(Math.random()*arr.length)]; }

    // Confetti
    function celebrateConfetti(){ const count=60; for(let i=0;i<count;i++){ const el=document.createElement('div'); el.classList.add('confetti-piece'); const size= Math.random()*10+6; el.style.position='absolute'; el.style.width=size+'px'; el.style.height=size+'px'; el.style.backgroundColor=['#ffd74f','#ff6b6b','#7afcff','#9d7aff'][Math.floor(Math.random()*4)]; el.style.left=Math.random()*100+'%'; el.style.top='-10%'; el.style.opacity=1; el.style.borderRadius='3px'; el.style.pointerEvents='none'; confettiContainer.appendChild(el);
      const duration=2000+Math.random()*1000;
      const endX = (Math.random()-0.5)*50;
      const fall = () => {
        const start=performance.now();
        function frame(t){
          const progress=(t-start)/duration;
          if(progress>=1){ el.remove(); return; }
          el.style.transform=`translate(${endX*progress}px, ${progress*120}vh) rotate(${progress*720}deg)`;
          el.style.opacity=1-progress;
          requestAnimationFrame(frame);
        }
        requestAnimationFrame(frame);
      };
      setTimeout(fall, Math.random()*200);
    } }

    // Background particles (–ª–µ–≥–∫–∏–π floating effect)
    const canvas=document.getElementById('bg-canvas'); const ctx=canvas.getContext('2d'); let particles=[];
    function resizeCanvas(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();
    class Particle{ constructor(){ this.reset(); }
      reset(){ this.x=Math.random()*canvas.width; this.y=canvas.height + Math.random()*200; this.size= Math.random()*8+4; this.speedY= Math.random()*0.5+0.3; this.alpha= Math.random()*0.3+0.1; this.tilt=Math.random()*Math.PI*2; this.type=Math.random()<0.15? 'chip':'circle'; }
      update(){ this.y -= this.speedY; this.tilt += 0.02; if(this.y< -50) this.reset(); }
      draw(){ ctx.save(); ctx.globalAlpha=this.alpha; if(this.type==='chip'){
          ctx.translate(this.x + Math.sin(this.tilt)*6, this.y);
          ctx.beginPath(); ctx.lineWidth=2; ctx.strokeStyle='rgba(255,255,255,0.15)'; ctx.arc(0,0,8,0,Math.PI*2); ctx.stroke(); ctx.fillStyle='rgba(255,215,79,0.1)'; ctx.fill(); ctx.font='8px system-ui'; ctx.textAlign='center'; ctx.fillStyle='rgba(255,255,255,0.4)'; ctx.fillText('‚Çµ',0,2);
        } else {
          ctx.fillStyle='rgba(255,255,255,0.06)'; ctx.beginPath(); ctx.arc(this.x + Math.sin(this.tilt)*4, this.y, this.size,0,Math.PI*2); ctx.fill(); }
        ctx.restore(); }
    }
    for(let i=0;i<60;i++) particles.push(new Particle());
    function animateBg(){ ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p=>{ p.update(); p.draw(); }); requestAnimationFrame(animateBg); }
    animateBg();

    // Keyboard shortcuts
    document.addEventListener('keydown', e=>{ if(e.key==='h'||e.key==='H') playerHit(); if(e.key==='s'||e.key==='S') playerStand(); if(e.key==='n'||e.key==='N') startGame(); });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    showLog('–ñ–º–∏ –ù–æ–≤–∞—è, –®—É—Ä–∏–∫! üêîüí•');
    // –ú–µ–ª–∫–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∫—É—Ä–∏—Ü—ã
    setInterval(()=>{ const phrases=["–Ø –≤–∏–∂—É —Ç–≤–æ–∏ –∫–∞—Ä—Ç—ã, –®—É—Ä–∏–∫...","–ì–æ—Ç–æ–≤—å—Å—è –∫ –ø–æ—Ç—Ä—è—Å–µ–Ω–∏—é","–ß—ë—Ä—Ç, —É –Ω–µ—ë –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–π–¥!","Ai noroc, sau doar skill?"]; chickenSay(phrases[Math.floor(Math.random()*phrases.length)]); },12000);
  </script>
</body>
</html>
