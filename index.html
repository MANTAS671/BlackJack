<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HTML RPG</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: Arial, sans-serif;
      background: #111; color: #fff; display: flex; flex-direction: column; align-items: center;
    }
    h1 { margin-top: 10px; }

    #game {
      display: grid;
      grid-template-columns: repeat(10, 32px);
      grid-template-rows: repeat(10, 32px);
      gap: 2px;
      margin-top: 20px;
    }

    .cell {
      width: 32px; height: 32px;
      background: #333;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
    }

    .player { background: #0f0; }
    .enemy { background: #800; }
    .gold { background: gold; color: black; }
    .boss  { background: purple; }

    #hud {
      margin-top: 20px;
      text-align: center;
    }

    #controls {
      display: flex; gap: 10px; margin-top: 10px;
      flex-wrap: wrap; justify-content: center;
    }

    .btn {
      padding: 10px 15px;
      background: #222;
      border: 1px solid #555;
      color: white;
      font-size: 16px;
      border-radius: 6px;
    }

    .btn:active {
      background: #444;
    }

  </style>
</head>
<body>

  <h1>Mini RPG</h1>
  <div id="game"></div>
  <div id="hud">
    ‚ù§Ô∏è HP: <span id="hp">10</span> |
    ü™ô Gold: <span id="gold">0</span>
  </div>

  <!-- Controls for mobile -->
  <div id="controls">
    <button class="btn" onclick="move('up')">‚¨ÜÔ∏è</button><br>
    <button class="btn" onclick="move('left')">‚¨ÖÔ∏è</button>
    <button class="btn" onclick="move('down')">‚¨áÔ∏è</button>
    <button class="btn" onclick="move('right')">‚û°Ô∏è</button>
  </div>

  <script>
    const mapSize = 10;
    const game = document.getElementById('game');
    const hpSpan = document.getElementById('hp');
    const goldSpan = document.getElementById('gold');

    let player = { x: 0, y: 0, hp: 10, gold: 0 };

    const cells = [];

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
    for (let y = 0; y < mapSize; y++) {
      for (let x = 0; x < mapSize; x++) {
        const div = document.createElement('div');
        div.classList.add('cell');
        div.dataset.x = x;
        div.dataset.y = y;
        game.appendChild(div);
        cells.push(div);
      }
    }

    // –†–∞–∑–º–µ—â–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤, –∑–æ–ª–æ—Ç–∞ –∏ –±–æ—Å—Å–∞
    const enemies = [{x:2,y:3},{x:5,y:6},{x:7,y:1}];
    const golds   = [{x:1,y:1},{x:4,y:4},{x:8,y:2}];
    const boss    = {x:9,y:9};

    function render() {
      cells.forEach(cell => {
        cell.className = 'cell';
        const x = +cell.dataset.x;
        const y = +cell.dataset.y;

        if (x === player.x && y === player.y) cell.classList.add('player');
        else if (enemies.some(e => e.x === x && e.y === y)) cell.classList.add('enemy');
        else if (golds.some(g => g.x === x && g.y === y)) cell.classList.add('gold');
        else if (boss.x === x && boss.y === y) cell.classList.add('boss');
      });

      hpSpan.textContent = player.hp;
      goldSpan.textContent = player.gold;
    }

    function move(dir) {
      if (player.hp <= 0) return alert('–¢—ã —É–º–µ—Ä! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');

      if (dir === 'up' && player.y > 0) player.y--;
      else if (dir === 'down' && player.y < mapSize - 1) player.y++;
      else if (dir === 'left' && player.x > 0) player.x--;
      else if (dir === 'right' && player.x < mapSize - 1) player.x++;

      checkCell();
      render();
    }

    function checkCell() {
      // –∑–æ–ª–æ—Ç–æ
      const goldIndex = golds.findIndex(g => g.x === player.x && g.y === player.y);
      if (goldIndex !== -1) {
        player.gold += 10;
        golds.splice(goldIndex, 1);
        alert('–¢—ã –Ω–∞—à—ë–ª –∑–æ–ª–æ—Ç–æ!');
      }

      // –≤—Ä–∞–≥
      const enemyIndex = enemies.findIndex(e => e.x === player.x && e.y === player.y);
      if (enemyIndex !== -1) {
        player.hp -= 2;
        alert('–¢—ã –ø–æ–ª—É—á–∏–ª —É—Ä–æ–Ω –æ—Ç –≤—Ä–∞–≥–∞!');
        enemies.splice(enemyIndex, 1);
      }

      // –±–æ—Å—Å
      if (player.x === boss.x && player.y === boss.y) {
        if (player.hp >= 5) {
          alert('–¢—ã –ø–æ–±–µ–¥–∏–ª —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–æ—Å—Å–∞! –ü–æ–±–µ–¥–∞!');
        } else {
          alert('–¢—ã —Å–ª–∏—à–∫–æ–º —Å–ª–∞–± –¥–ª—è –±–æ—Å—Å–∞ –∏ –ø–æ–≥–∏–±.');
          player.hp = 0;
        }
      }
    }

    document.addEventListener('keydown', (e) => {
      const keyMap = {
        'ArrowUp': 'up',
        'ArrowDown': 'down',
        'ArrowLeft': 'left',
        'ArrowRight': 'right',
        'w': 'up', 's': 'down', 'a': 'left', 'd': 'right'
      };
      const dir = keyMap[e.key];
      if (dir) move(dir);
    });

    render();
  </script>
</body>
</html>
