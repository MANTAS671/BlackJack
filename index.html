<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Monkey Blackjack üêí</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: url('https://i.imgur.com/x5XfEvd.jpg') center center / cover no-repeat fixed;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
    }

    h1 {
      text-shadow: 2px 2px 5px #000;
    }

    .game {
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border-radius: 15px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 0 20px #000;
    }

    .cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .card {
      width: 60px;
      height: 90px;
      margin: 5px;
      background-size: cover;
      background-position: center;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.5);
      animation: drop 0.3s ease-in;
    }

    @keyframes drop {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }

    button {
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background-color: #ffeb3b;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background-color: #fff176;
    }

    .status {
      margin-top: 10px;
      font-size: 18px;
      text-align: center;
      min-height: 30px;
    }
  </style>
</head>
<body>
  <h1>üêí Monkey Blackjack</h1>
  <div class="game">
    <h2>–¢–≤–æ–∏ –∫–∞—Ä—Ç—ã (<span id="player-total">0</span>)</h2>
    <div id="player-cards" class="cards"></div>

    <h2>–ö–∞—Ä—Ç—ã –¥–∏–ª–µ—Ä–∞ (<span id="dealer-total">?</span>)</h2>
    <div id="dealer-cards" class="cards"></div>

    <div class="buttons">
      <button onclick="hit()">–í–∑—è—Ç—å üçå</button>
      <button onclick="stand()">–•–≤–∞—Ç–∏—Ç üôà</button>
      <button onclick="restart()">–ó–∞–Ω–æ–≤–æ üîÅ</button>
    </div>

    <div class="status" id="message"></div>
  </div>

  <script>
    const suits = ['C', 'D', 'H', 'S'];
    const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
    let deck = [];
    let playerHand = [];
    let dealerHand = [];
    let gameOver = false;
    let dealerHiddenCard;

    function createDeck() {
      deck = [];
      for (let s of suits) {
        for (let v of values) {
          deck.push({suit: s, value: v});
        }
      }
      deck.sort(() => Math.random() - 0.5);
    }

    function getCardImage(card) {
      return `https://raw.githubusercontent.com/hayeah/playing-cards-assets/master/png/${card.value}${card.suit}.png`;
    }

    function getValue(card) {
      if (['J','Q','K'].includes(card.value)) return 10;
      if (card.value === 'A') return 11;
      return parseInt(card.value);
    }

    function calculateTotal(hand) {
      let total = 0;
      let aces = 0;
      hand.forEach(card => {
        total += getValue(card);
        if (card.value === 'A') aces++;
      });
      while (total > 21 && aces > 0) {
        total -= 10;
        aces--;
      }
      return total;
    }

    function drawCard(hand, containerId, hidden = false) {
      const card = deck.pop();
      hand.push(card);
      const div = document.createElement('div');
      div.className = 'card';
      div.style.backgroundImage = hidden
        ? "url('https://raw.githubusercontent.com/hayeah/playing-cards-assets/master/png/back.png')"
        : `url(${getCardImage(card)})`;
      document.getElementById(containerId).appendChild(div);
      return card;
    }

    function startGame() {
      createDeck();
      playerHand = [];
      dealerHand = [];
      gameOver = false;
      document.getElementById("player-cards").innerHTML = '';
      document.getElementById("dealer-cards").innerHTML = '';
      document.getElementById("message").innerText = '';
      document.getElementById("player-total").innerText = '0';
      document.getElementById("dealer-total").innerText = '?';

      drawCard(playerHand, "player-cards");
      drawCard(playerHand, "player-cards");
      drawCard(dealerHand, "dealer-cards");
      dealerHiddenCard = drawCard(dealerHand, "dealer-cards", true);

      updateTotals();
    }

    function hit() {
      if (gameOver) return;
      drawCard(playerHand, "player-cards");
      updateTotals();
      if (calculateTotal(playerHand) > 21) {
        endGame("üôà –ü–µ—Ä–µ–±–æ—Ä! –û–±–µ–∑—å—è–Ω–∫–∞ –≥—Ä—É—Å—Ç–∏—Ç...");
      }
    }

    function stand() {
      if (gameOver) return;
      document.getElementById("dealer-cards").innerHTML = '';
      dealerHand.forEach(card => {
        const div = document.createElement('div');
        div.className = 'card';
        div.style.backgroundImage = `url(${getCardImage(card)})`;
        document.getElementById("dealer-cards").appendChild(div);
      });

      while (calculateTotal(dealerHand) < 17) {
        drawCard(dealerHand, "dealer-cards");
      }

      const playerTotal = calculateTotal(playerHand);
      const dealerTotal = calculateTotal(dealerHand);
      updateTotals(true);

      if (dealerTotal > 21 || playerTotal > dealerTotal) {
        endGame("üéâ –ü–æ–±–µ–¥–∞! –û–±–µ–∑—å—è–Ω–∫–∞ —Ç–∞–Ω—Ü—É–µ—Ç –æ—Ç —Å—á–∞—Å—Ç—å—è!");
      } else if (playerTotal < dealerTotal) {
        endGame("üíÄ –£–≤—ã, –¥–∏–ª–µ—Ä-–æ–±–µ–∑—å—è–Ω–∞ –ø–æ–±–µ–¥–∏–ª.");
      } else {
        endGame("ü§ù –ù–∏—á—å—è! –û–±–µ–∑—å—è–Ω—ã —É–≤–∞–∂–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.");
      }
    }

    function endGame(msg) {
      gameOver = true;
      document.getElementById("message").innerText = msg;
    }

    function restart() {
      startGame();
    }

    function updateTotals(revealDealer = false) {
      const playerTotal = calculateTotal(playerHand);
      document.getElementById("player-total").innerText = playerTotal;
      if (revealDealer) {
        document.getElementById("dealer-total").innerText = calculateTotal(dealerHand);
      }
    }

    window.onload = startGame;
  </script>
</body>
</html>
