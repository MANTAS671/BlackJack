<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>–ë–ª—ç–∫–¥–∂–µ–∫ –ø—Ä–æ—Ç–∏–≤ –û–±–µ–∑—å—è–Ω—ã üêí ‚Äî Dark</title>
<style>
:root{
  /* –≥–ª—É–±–æ–∫–∏–π —Ç—ë–º–Ω—ã–π —Å—Ç–æ–ª + –Ω–µ–æ–Ω–æ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç */
  --bg:#0b0f12; --bg2:#11171c;
  --felt:#0f2a24; --felt2:#132f28;
  --accent:#00d1b2; /* –º—è—Ç–Ω—ã–π –Ω–µ–æ–Ω */
  --accent2:#8af3e6; --danger:#ff4d6d; --ok:#30e38a; --muted:#8a97a1;
  --card:#fffdf7; --ink:#0b0f12; --shadow:rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:
 radial-gradient(60% 40% at 70% 0%, #0f161b, #0b0f12),
 linear-gradient(180deg, #0b0f12, #0b0f12);
 color:#e9eef1; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial}
.app{min-height:100svh; display:flex; flex-direction:column; align-items:center; gap:12px; padding: clamp(10px,2.5vw,24px);}

/* –ª—ë–≥–∫–∏–π ¬´—à—É–º¬ª –∏ —á–∞—Å—Ç–∏—Ü—ã */
.noise{position:fixed; inset:0; pointer-events:none; opacity:.06; mix-blend-mode:screen; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140"><filter id="n"><feTurbulence baseFrequency=".8" numOctaves="2" seed="7"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');}
.particles{position:absolute; inset:0; overflow:hidden; pointer-events:none}
.particles span{position:absolute; width:2px; height:2px; border-radius:50%; background:var(--accent2); opacity:.25; animation:float linear infinite;}
.particles span:nth-child(odd){background:#66ffe0; opacity:.22}
@keyframes float{
  from{transform:translateY(120vh)}
  to{transform:translateY(-20vh)}
}

.header{display:flex; align-items:center; justify-content:space-between; gap:10px; width:100%; max-width:1100px;}
.title{font-weight:900; letter-spacing:.2px; display:flex; align-items:center; gap:10px; font-size:1.05rem}
.monkey{font-size:1.5rem; filter: drop-shadow(0 2px 0 var(--shadow));}
.bank{margin-left:auto; background:linear-gradient(180deg,#0f2220,#0c1d1a); border:1px solid #1d3a33; color:#b1fff1; font-weight:900; padding:8px 12px; border-radius:12px; box-shadow:0 8px 30px #00d1b226, inset 0 0 24px #00d1b214;}

.btn,button{appearance:none; border:none; background:linear-gradient(180deg,#0e2622,#0b1f1c); color:#bffcf2; border:1px solid #13443b; font-weight:900; letter-spacing:.2px; padding:10px 12px; border-radius:12px; box-shadow:0 8px 20px #00d1b220, inset 0 0 24px #00d1b210; transform:translateY(0); transition:transform .08s ease, filter .08s ease, box-shadow .2s; cursor:pointer}
.btn:hover{filter:saturate(1.1) brightness(1.08)}
.btn:active{transform:translateY(2px)}
button[disabled]{opacity:.45; filter:grayscale(.25); box-shadow:none; transform:none; cursor:not-allowed}
.secondary{background:linear-gradient(180deg,#2b2331,#1e1923); border-color:#3b2b46; color:#e9d2ff; box-shadow:0 8px 20px #9b59ff22, inset 0 0 24px #9b59ff12}
.ghost{background:linear-gradient(180deg,#1b2126,#151a1f); border-color:#28313a; color:#d7e2ea}
.success{background:linear-gradient(180deg,#11311f,#0e291a); border-color:#235a43; color:#c6ffe6}
.danger{background:linear-gradient(180deg,#2a1219,#1f0f14); border-color:#5a1e2f; color:#ffd7de}

/* —Å—Ç–æ–ª */
.table{position:relative; width:100%; max-width:1100px; background:
 radial-gradient(60% 80% at 50% 0%, #173b33, #0e2621 60%, #0b1f1b 100%),
 linear-gradient(180deg, var(--felt2), var(--felt));
 border-radius:18px; box-shadow:0 24px 60px #000c, inset 0 0 0 1px #ffffff10; padding: clamp(10px, 2.2vw, 22px); overflow:hidden}
.glow{position:absolute; inset:-10% -10% auto -10%; height:60%; background:radial-gradient(80% 100% at 50% 0%, #00d1b226 0, #ffffff00 60%); pointer-events:none}
.monkey-bg{position:absolute; right:-36px; bottom:-28px; width:220px; height:220px; opacity:.08; filter:contrast(110%) saturate(110%); pointer-events:none}

.dealer-area,.player-area{display:grid; gap:8px;}
.dealer-area{padding-bottom:6px; border-bottom:1px dashed #ffffff22;}
.name-row{display:flex; align-items:center; gap:8px; font-weight:800;}
.avatar{width:36px;height:36px;border-radius:50%; background:
  radial-gradient(75% 75% at 30% 30%,#233d38,#1b322d 60%,#132722),
  #1d3732;
  display:grid; place-items:center; box-shadow:0 3px 10px var(--shadow), inset 0 -2px 6px #0006; border:1px solid #2a4e46}
.avatar span{filter: drop-shadow(0 1px 0 #0009); font-size:1.1rem}
.score{align-self:center; font-weight:900; padding:6px 10px; border-radius:10px; background:#0b141680; border:1px solid #1d2a32; box-shadow: inset 0 1px 0 #ffffff12}
.comment{margin-top:2px; font-style:italic; opacity:.95}
.badge{padding:6px 10px; border-radius:999px; background:#0d161a; border:1px solid #1b2b32; font-weight:800; font-size:.9rem; color:#b6c8d3}

.hands{display:flex; flex-direction:column; gap:8px}
.hand{display:flex; align-items:flex-start; gap:10px; flex-wrap:wrap; min-height:110px; padding:6px 0}
.hand.is-active{outline:2px dashed #00d1b2aa; outline-offset:6px; border-radius:12px; padding:6px; animation:pulse 1.2s ease-in-out infinite}
@keyframes pulse{50%{outline-color:#8af3e6aa; filter:drop-shadow(0 0 12px #00d1b240)}}

/* –∫–∞—Ä—Ç—ã */
.card{width:72px; height:104px; border-radius:10px; background:var(--card); box-shadow:
  0 8px 20px var(--shadow),
  inset 0 0 0 1px #e7e0ce;
 position:relative; transform:translateY(-20px) scale(.98) rotate(var(--r,0deg)); opacity:0; animation:deal .45s cubic-bezier(.21,.98,.6,.99) forwards;}
@keyframes deal{to{transform:translateY(0) scale(1) rotate(var(--r,0deg)); opacity:1}}
.card svg{width:100%;height:100%;display:block;}
.hidden .face{visibility:hidden}
.hidden::after{
  content:"üÇ†"; position:absolute; inset:0; display:grid; place-items:center; font-size:40px;
  background:repeating-linear-gradient(45deg, #1b255a 0 10px, #121a49 10px 20px);
  color:#e5ecff; border-radius:10px; box-shadow: inset 0 0 0 1px #2d3c90;
}

/* –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π */
.controls{display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px;}
@media (min-width:740px){ .controls{grid-template-columns:1fr 1fr;} }
.row{display:flex; gap:8px; flex-wrap:wrap; align-items:center;}
input[type=number]{width:120px; padding:10px 12px; border-radius:10px; border:1px solid #22323a; background:#0e161a; color:#dce8ee; font-weight:700;}
.chips{display:flex; gap:8px; align-items:center;}
.chip{min-width:44px;height:44px;border-radius:999px; display:grid; place-items:center; background:#121a20; border:1px solid #1f2c35; color:#9ed8cc; font-weight:900; box-shadow:0 8px 20px #000c, inset 0 0 24px #00d1b210;}
.chip:hover{filter:brightness(1.15)}

/* –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
.side{display:grid; gap:10px; margin-top:10px}
.panel{background:#0c1418; border:1px solid #19262c; border-radius:12px; padding:10px}
.panel h3{margin:.2rem 0 .6rem; font-size:1rem}
.stats{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:6px}
.stat{background:#0f1a20; border:1px solid #1a2a34; padding:8px 10px; border-radius:10px; text-align:center; font-weight:800}
.log{max-height:160px; overflow:auto; font-size:.9rem}

/* –≤—Å–ø–ª—ã–≤–∞—à–∫–∞ */
.banner{position:absolute; left:50%; transform:translate(-50%, -120%); top:0; background:#0b1217ee; border:1px solid #20313a; padding:10px 14px; border-radius:10px; font-weight:800; color:#affff3; opacity:0; pointer-events:none; box-shadow:0 18px 50px #000a}
.banner.show{animation:drop .9s ease forwards}
@keyframes drop{0%{transform:translate(-50%,-120%); opacity:0} 40%{transform:translate(-50%,10%); opacity:1} 100%{transform:translate(-50%,-20%); opacity:1}}
.footer{opacity:.75; font-size:.9rem; text-align:center; margin-top:6px}
.small{font-size:.85rem; opacity:.9}
</style>
</head>
<body>
<div class="noise"></div>
<div class="app">
  <div class="header">
    <div class="title"><span class="monkey">üêí</span> –ë–ª—ç–∫–¥–∂–µ–∫ –ø—Ä–æ—Ç–∏–≤ –û–±–µ–∑—å—è–Ω—ã ‚Äî Dark</div>
    <div class="bank">–ë–∞–Ω–∞–Ω—ã: <span id="bank">500</span> üçå</div>
  </div>

  <div class="table" id="table">
    <div class="particles" id="particles"></div>
    <div class="glow"></div>
    <svg class="monkey-bg" viewBox="0 0 200 200" aria-hidden="true">
      <g fill="#00d1b2"><circle cx="120" cy="120" r="60" opacity=".06"/><circle cx="85" cy="90" r="12" opacity=".20"/><circle cx="155" cy="90" r="12" opacity=".20"/><circle cx="120" cy="140" r="20" opacity=".12"/><rect x="100" y="160" width="40" height="6" rx="3" opacity=".18"/></g>
    </svg>

    <div id="banner" class="banner">üîÅ –ü–µ—Ä–µ—Ç–∞—Å–æ–≤–∫–∞‚Ä¶ –û–±–µ–∑—å—è–Ω–∞ —à–µ–ø—á–µ—Ç –∫–∞—Ä—Ç–∞–º</div>

    <div class="dealer-area">
      <div class="name-row">
        <div class="avatar"><span>üêí</span></div>
        <div><strong>–î–∏–ª–µ—Ä: –û–±–µ–∑—å—è–Ω–∞</strong></div>
        <div class="score" id="dealerScore">‚Äî</div>
        <span class="badge" id="shoeInfo">–¢—É—Ñ–ª—è: 6 –∫–æ–ª–æ–¥ ‚Ä¢ 0% –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ</span>
      </div>
      <div class="hand" id="dealerHand"></div>
      <div class="comment" id="dealerComment">¬´–°—Ç–∞–≤–∫–∏ –ø–æ–≤—ã—à–µ ‚Äî –±–∞–Ω–∞–Ω—ã –ø–æ–≤–∫—É—Å–Ω–µ–µ‚Ä¶¬ª</div>
    </div>

    <div class="player-area">
      <div class="name-row">
        <div class="avatar"><span>üßë</span></div>
        <div><strong>–ò–≥—Ä–æ–∫</strong></div>
        <div class="score" id="playerScore">‚Äî</div>
        <span class="badge">–ü—Ä–∞–≤–∏–ª–æ –¥–∏–ª–µ—Ä–∞: <b id="ruleText">S17</b></span>
      </div>

      <div class="hands" id="handsContainer">
        <div class="hand is-active" id="playerHand0"></div>
      </div>
      <div class="comment" id="playerComment">–ü–æ—Å—Ç–∞–≤—å –∏ –∂–º–∏ ¬´–†–∞–∑–¥–∞—Ç—å¬ª.</div>
    </div>

    <div class="controls">
      <div class="row">
        <label for="bet"><strong>–°—Ç–∞–≤–∫–∞ (üçå):</strong></label>
        <input type="number" id="bet" min="1" step="1" value="25" />
        <div class="chips">
          <button class="chip" data-chip="10">+10</button>
          <button class="chip" data-chip="25">+25</button>
          <button class="chip" data-chip="50">+50</button>
          <button class="chip" data-chip="-10">-10</button>
          <button class="chip" data-chip="max">MAX</button>
        </div>
      </div>
      <div class="row">
        <button id="dealBtn" class="btn">–†–∞–∑–¥–∞—Ç—å</button>
        <button id="hitBtn" class="secondary" disabled>–ï—â—ë</button>
        <button id="standBtn" class="ghost" disabled>–•–≤–∞—Ç–∏—Ç</button>
        <button id="doubleBtn" class="btn" disabled>–î–∞–±–ª</button>
        <button id="splitBtn" class="btn" disabled>–°–ø–ª–∏—Ç</button>
        <button id="surrenderBtn" class="danger" disabled>–°–¥–∞—á–∞</button>
        <button id="insuranceBtn" class="success" disabled>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞</button>
      </div>
    </div>

    <div class="side">
      <div class="panel">
        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div class="stats">
          <div class="stat">–†–∞—É–Ω–¥–æ–≤: <span id="stRounds">0</span></div>
          <div class="stat">–ü–æ–±–µ–¥: <span id="stWins">0</span></div>
          <div class="stat">–ü—É—à–µ–π: <span id="stPush">0</span></div>
          <div class="stat">–ë–ª—ç–∫–¥–∂–µ–∫–æ–≤: <span id="stBJ">0</span></div>
          <div class="stat">–ü—Ä–æ—Ñ–∏—Ç (üçå): <span id="stProfit">0</span></div>
          <div class="stat">–ú–∞–∫—Å —Å–µ—Ä–∏—è –ø–æ–±–µ–¥: <span id="stStreak">0</span></div>
        </div>
      </div>
      <div class="panel">
        <h3>–ò—Å—Ç–æ—Ä–∏—è</h3>
        <div id="log" class="log"></div>
      </div>
      <div class="footer">–ï—Å–ª–∏ –¥–∏–ª–µ—Ä –ø–æ–±–µ–¥–∏—Ç: ¬´<em>–û–±–µ–∑—å—è–Ω–∞ –≤–∞—Å –≤—ã–∏–≥—Ä–∞–ª–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. –í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –±–∞–Ω–∞–Ω—ã.</em>¬ª ‚Äî –Ω–∏—á–µ–≥–æ –ª–∏—á–Ω–æ–≥–æ üêí</div>
    </div>
  </div>
</div>

<script>
(() => {
  /* ===== particles ===== */
  const particles = document.getElementById('particles');
  for(let i=0;i<60;i++){
    const s = document.createElement('span');
    s.style.left = Math.random()*100 + 'vw';
    s.style.animationDuration = (8+Math.random()*14)+'s';
    s.style.animationDelay = (-Math.random()*20)+'s';
    particles.appendChild(s);
  }

  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  const banner = $('#banner');
  const logEl = $('#log');

  /* ===== settings (–æ—Å—Ç–∞–≤–∏–ª S17 –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ S17 –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã) ===== */
  let OPT = { decks:6, penetration:75, S17:true, minBet:5, maxBet:500 };

  /* ===== state ===== */
  const dealerHandEl = $('#dealerHand');
  const dealerScoreEl = $('#dealerScore');
  const dealerCommentEl = $('#dealerComment');

  const handsContainer = $('#handsContainer');
  const playerScoreEl = $('#playerScore');
  const playerCommentEl = $('#playerComment');

  const bankEl = $('#bank');
  const shoeInfoEl = $('#shoeInfo');
  const ruleText = $('#ruleText');

  const betInput = $('#bet');
  const dealBtn = $('#dealBtn');
  const hitBtn = $('#hitBtn');
  const standBtn = $('#standBtn');
  const doubleBtn = $('#doubleBtn');
  const splitBtn = $('#splitBtn');
  const surrenderBtn = $('#surrenderBtn');
  const insuranceBtn = $('#insuranceBtn');

  const stRounds = $('#stRounds'), stWins=$('#stWins'), stPush=$('#stPush'), stBJ=$('#stBJ'), stProfit=$('#stProfit'), stStreak=$('#stStreak');

  // –†–µ–ø–ª–∏–∫–∏ –æ–±–µ–∑—å—è–Ω—ã: –º–Ω–æ–≥–æ, —Å –∏–∑–¥—ë–≤–∫–æ–π –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º
  const lines = {
    start: [
      "¬´–°—Ç–∞–≤–∫–∏ –ø–æ–≤—ã—à–µ ‚Äî –±–∞–Ω–∞–Ω—ã –ø–æ–≤–∫—É—Å–Ω–µ–µ‚Ä¶¬ª",
      "¬´–Ø –Ω–µ –∂—É–ª—å–Ω–∏—á–∞—é. –ü—Ä–æ—Å—Ç–æ –∫–∞—Ä—Ç—ã –º–µ–Ω—è –æ–±–æ–∂–∞—é—Ç.¬ª",
      "¬´–ü–∞—Ö–Ω–µ—Ç –ø–æ–±–µ–¥–æ–π. –ò–ª–∏ —ç—Ç–æ –º–æ–∏ –±–∞–Ω–∞–Ω—ã?¬ª",
      "¬´–†–∞—Å—Å–ª–∞–±—å—Å—è, –ò–≥—Ä–æ–∫. –Ø —Å–∞–º–∞ –≤—Å—ë –∏—Å–ø–æ—Ä—á—É‚Ä¶ —Ç–µ–±–µ.¬ª",
      "¬´–ö—Ç–æ-—Ç–æ –ø—Ä–∏—à—ë–ª –ø–æ—Ç–µ—Ä—è—Ç—å –≤–∏—Ç–∞–º–∏–Ω B(–∞–Ω–∞–Ω—ã)?¬ª",
      "¬´–î–∂—É–Ω–≥–ª–∏ —à–µ–ø—á—É—Ç: –Ω–µ —Ç—è–Ω–∏‚Ä¶ –∏–ª–∏ —Ç—è–Ω–∏. –ú–Ω–µ –≤—Å—ë –≤—ã–≥–æ–¥–Ω–æ.¬ª",
      "¬´–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–ª–µ—Ä. –õ—é–±–∏—Ç–µ–ª—å —á—É–∂–∏—Ö –±–∞–Ω–∞–Ω–æ–≤.¬ª"
    ],
    playerBlackjack: [
      "¬´–ë–ª—ç–∫–¥–∂–µ–∫? –õ–∞–¥–Ω–æ‚Ä¶ —É–≤–∞–∂–µ–Ω–∏–µ. –ù–æ –Ω–µ –ø—Ä–∏–≤—ã–∫–∞–π.¬ª",
      "¬´–ö–∞—Ä—Ç—ã —Ç–µ–±—è –ª—é–±—è—Ç. –Ø ‚Äî –Ω–µ –æ—á–µ–Ω—å.¬ª",
      "¬´–í–æ—Ç —ç—Ç–æ —É–¥–∞—Ä. –ü—Ä–∏–∑–Ω–∞—é, –∫—Ä–∞—Å–∏–≤–æ.¬ª",
      "¬´–°–ª—É—á–∞–π–Ω–æ—Å—Ç—å. –û–¥–Ω–∞ –Ω–∞ –º–∏–ª–ª–∏–æ–Ω. –ö–∞–∫ —Ç–≤–æ—è —É–¥–∞—á–∞.¬ª"
    ],
    dealerWin: [
      "¬´–û–±–µ–∑—å—è–Ω–∞ –≤–∞—Å –≤—ã–∏–≥—Ä–∞–ª–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. –í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –±–∞–Ω–∞–Ω—ã.¬ª",
      "¬´–ë–∞–Ω–∞–Ω—ã ‚Äî —Å—é–¥–∞. –≠–º–æ—Ü–∏–∏ ‚Äî —Å–µ–±–µ.¬ª",
      "¬´–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π. –ë–∞–Ω–∞–Ω—ã ‚Äî –∫—Ä—É–≥–æ–≤–æ—Ä–æ—Ç –ø—Ä–∏—Ä–æ–¥—ã.¬ª",
      "¬´–Ø –±—ã —Å–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞‚Ä¶ –Ω–æ –∑–∞–Ω—è—Ç–∞ –ø–æ–¥—Å—á—ë—Ç–æ–º –±–∞–Ω–∞–Ω–æ–≤.¬ª",
      "¬´–ß—É–≤—Å—Ç–≤—É–µ—à—å? –≠—Ç–æ –∑–∞–ø–∞—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.¬ª"
    ],
    playerWin: [
      "¬´–•–º. –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –í—Ä–µ–º—è –≤–µ—Ä–Ω—É—Ç—å —É—Ç–µ—Ä—è–Ω–Ω–æ–µ.¬ª",
      "¬´–ù–µ —Ä–∞—Å—Å–ª–∞–±–ª—è–π—Å—è. –≠—Ç–æ –±—ã–ª–∞ –¥–æ–±—Ä–æ—Ç–∞ –ø—Ä–∏—Ä–æ–¥—ã.¬ª",
      "¬´–ü–æ–±–µ–¥–∏–ª? –õ–∞–¥–Ω–æ. –Ø –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–ª–µ–∫–ª–∞—Å—å.¬ª",
      "¬´–ó–∞–ø–∏—à–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫: –æ–±–µ–∑—å—è–Ω–∞ –ø—Ä–∏–∫–∏–Ω—É–ª–∞—Å—å –¥–æ–±—Ä–æ–π.¬ª"
    ],
    push: [
      "¬´–ü—É—à. –°–∫—É—á–Ω–æ. –ù–æ –∂–∏–≤–∏ –ø–æ–∫–∞.¬ª",
      "¬´–ù–∏—á—å—è ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –æ–±–∞ –Ω–µ—Å—á–∞—Å—Ç–Ω—ã.¬ª",
      "¬´–ü–æ–∫–∞ –±–µ–∑ –±–∞–Ω–∞–Ω–æ–≤. –†–∞–∑–æ—á–∞—Ä–æ–≤–∞–ª–∞.¬ª"
    ],
    hit: [
      "¬´–ï—â—ë? –°–º–µ–ª–æ. –õ—é–±–ª—é –∑—Ä–µ–ª–∏—â–∞.¬ª",
      "¬´–¢—è–Ω–∏-—Ç—è–Ω–∏‚Ä¶ –º–æ–∂–µ—Ç –∏ –ø–æ–≤–µ–∑—ë—Ç. –ú–Ω–µ.¬ª",
      "¬´–î–∞–≤–∞–π, –≥–µ—Ä–æ–π. –ö–∞—Ä—Ç–∞ –Ω–µ –∫—É—Å–∞–µ—Ç—Å—è. –Ø ‚Äî –¥–∞.¬ª"
    ],
    stand: [
      "¬´–°—Ç–æ–∏—à—å? –û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å ‚Äî –ø—É—Ç—å –∫‚Ä¶ —Å–∫—É–∫–µ.¬ª",
      "¬´–ù—É –≤—Å—ë, —è –ø–æ—à–ª–∞ –≤–æ—Ä–æ–≤–∞—Ç—å —Ç–≤–æ–∏ —à–∞–Ω—Å—ã.¬ª"
    ],
    double: [
      "¬´–î–∞–±–ª! –í–æ—Ç —ç—Ç–æ –≤–µ—Ä–∞. –Ø –≤–µ—Ä—é –≤ –æ–±—Ä–∞—Ç–Ω–æ–µ.¬ª",
      "¬´–£–¥–≤–æ–∏–ª? –ü—Ä–∏—è—Ç–Ω–æ —É–¥–≤–∞–∏–≤–∞—Ç—å —á—É–∂–∏–µ –ø–æ—Ç–µ—Ä–∏.¬ª"
    ],
    split: [
      "¬´–°–ø–ª–∏—Ç? –î–≤–∞ —à–∞–Ω—Å–∞. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª—é–±–∏—Ç –º–µ–Ω—è.¬ª",
      "¬´–†–∞–∑–º–Ω–æ–∂–∏–ª –ø—Ä–æ–±–ª–µ–º—ã ‚Äî —É–≤–∞–∂–∞—é –∫—Ä–µ–∞—Ç–∏–≤.¬ª"
    ],
    bust: [
      "¬´–ü–µ—Ä–µ–±–æ—Ä. –ë–∞–Ω–∞–Ω—ã –≤ —É—Ç–∏–ª—å.¬ª",
      "¬´–ì—Ä–æ–º–∫–æ —Å–∫–∞–∑–∞–Ω–æ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è. –¢–æ—á–Ω–µ–µ ‚Äî –±–∞–Ω–∞–Ω–æ–≤—ã–π —Ñ–ª–∏–ø.¬ª",
      "¬´21 ‚Äî —ç—Ç–æ –º–µ—á—Ç–∞. –£ —Ç–µ–±—è ‚Äî 22. –¢–æ–∂–µ —á–∏—Å–ª–æ.¬ª"
    ],
    insure: [
      "¬´–°—Ç—Ä–∞—Ö–æ–≤–∫–∞? –£–º–Ω–æ. –ò–Ω–æ–≥–¥–∞ –¥–∞–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.¬ª",
      "¬´–ü–æ–ª–±–∞–Ω–∞–Ω–∞ –Ω–∞ —Å—Ç—Ä–∞—Ö ‚Äî –≤–∫—É—Å —Å –ø—Ä–∏–≤–∫—É—Å–æ–º –æ—Ç—á–∞—è–Ω–∏—è.¬ª"
    ],
    surrender: [
      "¬´–°–¥–∞—á–∞ –ø—Ä–∏–Ω—è—Ç–∞. –°–º–µ–ª–æ—Å—Ç—å ‚Äî —ç—Ç–æ –∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –±–µ–∂–∞—Ç—å.¬ª",
      "¬´–ü–æ–ª–±–∞–Ω–∞–Ω–∞ –Ω–∞–∑–∞–¥. –ö–æ–º–∏—Å—Å–∏—è –∑–∞ —É–Ω–∏–∂–µ–Ω–∏–µ ‚Äî –Ω–æ–ª—å.¬ª"
    ]
  };

  // Shoe / decks
  const ranks = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
  const suits = [{s:"‚ô†", c:"#121620"},{s:"‚ô•", c:"#c62828"},{s:"‚ô¶", c:"#c62828"},{s:"‚ô£", c:"#121620"}];
  let shoe=[], cutPoint=0, used=0;

  // Gameplay state
  let bank=500, inRound=false, insuranceOffered=false, insuranceTaken=0;
  let dealer={hand:[], hideHole:true};
  let playerHands=[]; // {cards:[], bet, done, doubled, isBust, isBJ}
  let surrenderedHands=new Set();
  let activeHandIndex=0;
  const MAX_HANDS=4;

  // Stats
  let rounds=0, wins=0, pushes=0, bjs=0, profit=0, streak=0, maxStreak=0;

  function buildShoe(decks=6){
    const arr=[];
    for(let d=0; d<decks; d++)
      for(const r of ranks) for(const su of suits)
        arr.push({rank:r, suit:su.s, color:su.c});
    shuffle(arr); used=0; cutPoint=Math.floor(arr.length*(OPT.penetration/100)); return arr;
  }
  function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }
  function drawOne(){
    if(used >= cutPoint){ reshuffle(); }
    used++; updateShoeInfo();
    return shoe.pop();
  }
  function reshuffle(){ toast('üîÅ –ü–µ—Ä–µ—Ç–∞—Å–æ–≤–∫–∞‚Ä¶ –û–±–µ–∑—å—è–Ω–∞ —à–µ–ø—á–µ—Ç –∫–∞—Ä—Ç–∞–º'); shoe = buildShoe(OPT.decks); }
  function updateShoeInfo(){ const total=OPT.decks*52; const pct=Math.min(100, Math.floor(used/total*100)); shoeInfoEl.textContent=`–¢—É—Ñ–ª—è: ${OPT.decks} –∫–æ–ª–æ–¥ ‚Ä¢ ${pct}% –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ`; }

  // Cards
  function cardSVG(rank, suit, color="#111"){
    const top = rank + " " + suit, bot = suit + " " + rank;
    return `
    <svg viewBox="0 0 72 104" class="face" aria-label="${rank}${suit}">
      <defs><filter id="sd"><feDropShadow dx="0" dy="1" stdDeviation="1" flood-opacity=".25"/></filter></defs>
      <rect x="1.5" y="1.5" width="69" height="101" rx="9" fill="#fffdf7" stroke="#e7e0cf"/>
      <text x="6" y="14" font-family="ui-sans" font-weight="900" font-size="12" fill="${color}">${top}</text>
      <g transform="rotate(180,36,52)"><text x="6" y="14" font-family="ui-sans" font-weight="900" font-size="12" fill="${color}">${bot}</text></g>
      <g filter="url(#sd)">${pips(rank, suit, color)}</g>
    </svg>`;
  }
  function pips(rank, suit, color){
    const cx=36, cy=52;
    if(rank==="A") return `<text x="${cx}" y="${cy+10}" text-anchor="middle" font-size="52" font-weight="900" fill="${color}">${suit}</text>`;
    if(/^[2-9]|10$/.test(rank)){
      const n=(rank==="10")?10:parseInt(rank,10);
      const coords=[[36,32],[36,72],[20,42],[52,42],[20,62],[52,62],[20,32],[52,32],[20,72],[52,72]];
      return coords.slice(0,n).map(([x,y])=>`<text x="${x}" y="${y}" text-anchor="middle" font-size="18" font-weight="800" fill="${color}">${suit}</text>`).join("");
    }
    return `<text x="${cx}" y="${cy+10}" text-anchor="middle" font-size="46" font-weight="800" fill="${color}">${suit}</text>`;
  }
  function createCardEl(card, hidden=false, delayIdx=0){
    const el=document.createElement('div');
    el.className='card'+(hidden?' hidden':'');
    el.style.animationDelay=(0.08*delayIdx)+'s';
    el.style.setProperty('--r', (Math.random()*4-2)+'deg');
    el.innerHTML= card ? cardSVG(card.rank, card.suit, card.color) : '';
    return el;
  }

  // Values
  function handValue(cards){ let total=0, aces=0; for(const c of cards){ if(c.rank==="A"){ total+=11; aces++; } else if(["K","Q","J"].includes(c.rank)){ total+=10; } else total+=(c.rank==="10"?10:parseInt(c.rank,10)); } while(total>21 && aces>0){ total-=10; aces--; } return total; }
  const isBJ = (cards)=> cards.length===2 && handValue(cards)===21;
  const isPair = (cards)=> cards.length===2 && rankVal(cards[0])===rankVal(cards[1]);
  function rankVal(c){ if(c.rank==="A") return 11; if(["K","Q","J","10"].includes(c.rank)) return 10; return parseInt(c.rank,10) }
  function isSoft(cards){ let total=0, aces=0; for(const c of cards){ if(c.rank==="A"){ total+=11; aces++; } else if(["K","Q","J"].includes(c.rank)){ total+=10; } else total+=(c.rank==="10"?10:parseInt(c.rank,10)); } while(total>21 && aces>0){ total-=10; aces--; } return aces>0; }

  // UI helpers
  function getActiveEl(){ return $('#playerHand'+activeHandIndex); }
  function setActiveHand(idx){ $$('.hand').forEach(h=>h.classList.remove('is-active')); activeHandIndex=idx; $('#playerHand'+idx).classList.add('is-active'); refreshScores(); setActionsForActive(); }
  function setComment(el,t){ el.textContent=t; }
  function updateBank(){ bankEl.textContent=bank; }
  function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
  function rnd(a){ return a[Math.floor(Math.random()*a.length)]; }
  function toast(txt){ banner.textContent=txt; banner.classList.add('show'); setTimeout(()=>banner.classList.remove('show'),1600); }
  function log(msg){ const row=document.createElement('div'); row.textContent=msg; logEl.prepend(row); }

  function resetTableUI(){
    dealerHandEl.innerHTML=''; dealerScoreEl.textContent='‚Äî';
    handsContainer.innerHTML=''; const h=document.createElement('div'); h.id='playerHand0'; h.className='hand is-active'; handsContainer.appendChild(h);
    playerScoreEl.textContent='‚Äî';
    surrenderedHands.clear(); insuranceTaken=0; insuranceOffered=false;
    setComment(dealerCommentEl, rnd(lines.start)); setComment(playerCommentEl, '–ü–æ—Å—Ç–∞–≤—å –∏ –∂–º–∏ ¬´–†–∞–∑–¥–∞—Ç—å¬ª.');
  }
  function refreshScores(){
    const dVal = dealer.hideHole ? handValue(dealer.hand.slice(1)) : handValue(dealer.hand);
    dealerScoreEl.textContent = dealer.hideHole ? `? + ${handValue([dealer.hand[1]])}` : dVal;
    const active = playerHands[activeHandIndex] || playerHands[0];
    playerScoreEl.textContent = handValue(active.cards);
  }
  function setActionsForActive(){
    const h = playerHands[activeHandIndex];
    const initial = h.cards.length===2;
    hitBtn.disabled=false; standBtn.disabled=false;
    doubleBtn.disabled = !initial || bank < h.bet;
    splitBtn.disabled  = !(initial && isPair(h.cards) && playerHands.length<MAX_HANDS && bank >= h.bet);
    surrenderBtn.disabled = !initial;
    const dealerUpAce = dealer.hand[1]?.rank === 'A' && dealer.hideHole;
    insuranceBtn.disabled = !(initial && dealerUpAce && !insuranceOffered && bank >= Math.floor(h.bet/2));
  }

  function startRound(){
    let b = parseInt(betInput.value||25,10);
    b = clamp(b, OPT.minBet, Math.min(OPT.maxBet, bank));
    betInput.value=b;
    if(b>bank) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–Ω–∞–Ω–æ–≤.');
    if(b<OPT.minBet) return alert(`–ú–∏–Ω —Å—Ç–∞–≤–∫–∞ ${OPT.minBet}üçå`);

    inRound=true; surrenderedHands.clear(); insuranceTaken=0; insuranceOffered=false;
    bank -= b; updateBank();

    dealer={hand:[], hideHole:true};
    playerHands=[{cards:[], bet:b, done:false, doubled:false, isBust:false, isBJ:false}];
    activeHandIndex=0;

    resetTableUI();

    // P, D(hole), P, D
    const ph=getActiveEl();
    const p1=drawOne(); playerHands[0].cards.push(p1); ph.appendChild(createCardEl(p1,false,0));
    const d1=drawOne(); dealer.hand.push(d1); dealerHandEl.appendChild(createCardEl(d1,true,1));
    const p2=drawOne(); playerHands[0].cards.push(p2); ph.appendChild(createCardEl(p2,false,2));
    const d2=drawOne(); dealer.hand.push(d2); dealerHandEl.appendChild(createCardEl(d2,false,3));

    refreshScores();
    maybeOfferInsurance();

    if(isBJ(playerHands[0].cards)){
      playerHands[0].isBJ=true;
      finishPlayerPhase(true);
      setComment(dealerCommentEl, rnd(lines.playerBlackjack));
      return;
    }
    dealBtn.disabled=true;
    setActionsForActive();
    setComment(playerCommentEl,'–•–æ–¥ –ò–≥—Ä–æ–∫–∞: –ï—â—ë / –•–≤–∞—Ç–∏—Ç / –î–∞–±–ª / –°–ø–ª–∏—Ç / –°–¥–∞—á–∞.');
  }

  function maybeOfferInsurance(){
    const up = dealer.hand[1];
    if(up && up.rank==='A'){ insuranceOffered=true; insuranceBtn.disabled=false; setComment(dealerCommentEl, '¬´–¢—É–∑ –Ω–∞–≤–µ—Ä—Ö—É‚Ä¶ –±–µ—Ä—ë—à—å —Å—Ç—Ä–∞—Ö–æ–≤–∫—É?¬ª'); }
  }
  function takeInsurance(){
    const h = playerHands[activeHandIndex];
    const cost = Math.floor(h.bet/2);
    if(bank < cost) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–Ω–∞–Ω–æ–≤ –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏.');
    bank -= cost; updateBank(); insuranceTaken = cost; insuranceBtn.disabled=true; setComment(dealerCommentEl, rnd(lines.insure));
  }

  function hit(){
    const h=playerHands[activeHandIndex]; const el=getActiveEl();
    const c=drawOne(); h.cards.push(c); el.appendChild(createCardEl(c,false,h.cards.length+1));
    setComment(dealerCommentEl, rnd(lines.hit)); refreshScores();
    doubleBtn.disabled=true; splitBtn.disabled=true; surrenderBtn.disabled=true; insuranceBtn.disabled=true;
    if(handValue(h.cards)>21){ h.isBust=true; setComment(dealerCommentEl, rnd(lines.bust)); nextHandOrDealer(); }
  }
  function stand(){ setComment(dealerCommentEl, rnd(lines.stand)); nextHandOrDealer(); }
  function doDouble(){
    const h=playerHands[activeHandIndex];
    if(h.cards.length!==2 || bank < h.bet) return;
    bank -= h.bet; h.bet *= 2; h.doubled=true; updateBank();
    setComment(dealerCommentEl, rnd(lines.double)); hit(); if(!h.isBust) nextHandOrDealer();
  }
  function doSplit(){
    const base=playerHands[activeHandIndex];
    if(!(base.cards.length===2 && isPair(base.cards))) return;
    if(playerHands.length>=MAX_HANDS) return alert('–ú–∞–∫—Å–∏–º—É–º 4 —Ä—É–∫–∏.');
    if(bank < base.bet) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–Ω–∞–Ω–æ–≤ –Ω–∞ —Å–ø–ª–∏—Ç.');
    bank -= base.bet; updateBank(); setComment(dealerCommentEl, rnd(lines.split));

    const c1=base.cards[0], c2=base.cards[1];
    base.cards=[c1];
    const newHand = {cards:[c2], bet:base.bet, done:false, doubled:false, isBust:false, isBJ:false};
    playerHands.splice(activeHandIndex+1,0,newHand);

    // –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å —Ä—É–∫–∏
    handsContainer.innerHTML='';
    playerHands.forEach((h, idx)=>{ const d=document.createElement('div'); d.id='playerHand'+idx; d.className='hand'+(idx===activeHandIndex?' is-active':''); d.appendChild(createCardEl(h.cards[0],false,0)); handsContainer.appendChild(d); });

    // –ø–æ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–µ –≤ –∫–∞–∂–¥—É—é
    const add=(h, idx)=>{ const card=drawOne(); h.cards.push(card); $('#playerHand'+idx).appendChild(createCardEl(card,false,1)); };
    add(base, activeHandIndex); add(newHand, activeHandIndex+1);

    if(c1.rank==="A" && c2.rank==="A"){ nextHandOrDealer(true); } else { refreshScores(); setActionsForActive(); }
  }
  function surrender(){
    const h=playerHands[activeHandIndex]; if(h.cards.length!==2) return;
    surrenderedHands.add(activeHandIndex); h.done=true; setComment(dealerCommentEl, rnd(lines.surrender));
    const refund=Math.floor(h.bet/2); bank += refund; updateBank(); log(`–°–¥–∞—á–∞ —Ä—É–∫–∏ #${activeHandIndex+1}: +${refund}üçå`); nextHandOrDealer();
  }

  function nextHandOrDealer(forceFinish=false){
    playerHands[activeHandIndex].done=true;
    const nextIdx = playerHands.findIndex((h, idx)=> idx>activeHandIndex && !h.done);
    if(nextIdx!==-1 && !forceFinish){ setActiveHand(nextIdx); return; }
    finishPlayerPhase(false);
  }
  function finishPlayerPhase(){ hitBtn.disabled=standBtn.disabled=doubleBtn.disabled=splitBtn.disabled=surrenderBtn.disabled=insuranceBtn.disabled=true; dealerPlay(); }

  function dealerPlay(){
    dealer.hideHole=false; if(dealerHandEl.firstElementChild) dealerHandEl.firstElementChild.classList.remove('hidden'); refreshScores();
    const anyActive = playerHands.some((h,idx)=> !h.isBust && !surrenderedHands.has(idx));
    if(!anyActive){ return resolveRound(); }

    const step=()=>{ let v=handValue(dealer.hand); const soft=isSoft(dealer.hand);
      const mustHit = v<17 || (!OPT.S17 && v===17 && soft); // –º—ã –æ—Å—Ç–∞–≤–∏–ª–∏ S17=true –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      if(mustHit){ const c=drawOne(); dealer.hand.push(c); dealerHandEl.appendChild(createCardEl(c,false,dealer.hand.length+1)); refreshScores(); setTimeout(step, 520); }
      else resolveRound();
    };
    setTimeout(step, 520);
  }

  function resolveRound(){
    dealBtn.disabled=false;
    const dealerTotal=handValue(dealer.hand); const dealerBJ = isBJ(dealer.hand);

    if(insuranceTaken){
      if(dealerBJ){ bank += insuranceTaken * 3; log(`–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –≤—ã–ø–ª–∞—Ç–∏–ª–∞ ${insuranceTaken*2}üçå`); }
      else { log(`–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø—Ä–æ–∏–≥—Ä–∞–ª–∞ ${insuranceTaken}üçå`); }
      insuranceTaken=0; updateBank();
    }

    let roundProfit=0; let allDealer=true, allPush=true, anyBJ=false, anyPlayerWin=false;

    playerHands.forEach((h, idx)=>{
      if(surrenderedHands.has(idx)){ allDealer=false; allPush=false; return; }
      const total=handValue(h.cards); let delta=0, outcome='';
      if(h.isBJ && !dealerBJ){ delta=Math.floor(h.bet*2.5); outcome='playerBJ'; anyBJ=true; anyPlayerWin=true; allDealer=false; allPush=false; bjs++; }
      else if(h.isBust){ outcome='dealer'; }
      else if(dealerTotal>21){ delta=h.bet*2; outcome='player'; anyPlayerWin=true; allDealer=false; allPush=false; }
      else if(dealerBJ && !h.isBJ){ outcome='dealer'; }
      else if(total>dealerTotal){ delta=h.bet*2; outcome='player'; anyPlayerWin=true; allDealer=false; allPush=false; }
      else if(total<dealerTotal){ outcome='dealer'; }
      else { delta=h.bet; outcome='push'; allDealer=false; }
      roundProfit += (delta - h.bet);
      const tag = outcome==='player' || outcome==='playerBJ' ? '‚úÖ' : (outcome==='push' ? '‚è∏Ô∏è' : '‚ùå');
      log(`${tag} –†—É–∫–∞ #${idx+1}: ${format(h.cards)} vs ${dealerTotal} ‚Äî ${desc(outcome)} | Œî ${delta - h.bet}üçå`);
      if(outcome==='push') pushes++;
    });

    profit += roundProfit; rounds++; if(anyPlayerWin){ wins++; streak++; maxStreak=Math.max(maxStreak,streak); } else if(allPush){ /* no change */ } else { streak=0; }
    stRounds.textContent=rounds; stWins.textContent=wins; stPush.textContent=pushes; stBJ.textContent=bjs; stProfit.textContent=profit; stStreak.textContent=maxStreak;

    if(allDealer){ setComment(dealerCommentEl, rnd(lines.dealerWin)); setComment(playerCommentEl, '–ú–∏–Ω—É—Å –±–∞–Ω–∞–Ω—ã. –ï—â—ë –ø–æ –æ–¥–Ω–æ–π?'); }
    else if(allPush){ setComment(dealerCommentEl, rnd(lines.push)); setComment(playerCommentEl, '–ü—É—à. –ë–∞–Ω–∞–Ω—ã –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–∏ —Ç–µ–±–µ.'); }
    else { setComment(dealerCommentEl, anyBJ? rnd(lines.playerBlackjack): rnd(lines.playerWin)); setComment(playerCommentEl, '–ö—Ä–∞—Å–∏–≤–æ. –ü—Ä–æ–¥–æ–ª–∂–∏–º.'); }
    dealerScoreEl.textContent=dealerTotal; inRound=false;
  }

  function format(cards){ return cards.map(c=>c.rank+c.suit).join(' '); }
  function desc(o){ return o==='playerBJ'?'–ë–ª—ç–∫–¥–∂–µ–∫ (3:2)': o==='player'?'–ü–æ–±–µ–¥–∞': o==='push'?'–ü—É—à':'–ü–æ—Ä–∞–∂–µ–Ω–∏–µ'; }

  // Controls
  dealBtn.addEventListener('click', ()=>{ if(inRound) return; if(bank<OPT.minBet) return alert('–ë–∞–Ω–∞–Ω–æ–≤ –Ω–µ—Ç ‚Äî –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É.'); startRound(); });
  hitBtn.addEventListener('click', ()=> !hitBtn.disabled && hit());
  standBtn.addEventListener('click', ()=> !standBtn.disabled && stand());
  doubleBtn.addEventListener('click', ()=> !doubleBtn.disabled && doDouble());
  splitBtn.addEventListener('click', ()=> !splitBtn.disabled && doSplit());
  surrenderBtn.addEventListener('click', ()=> !surrenderBtn.disabled && surrender());
  insuranceBtn.addEventListener('click', ()=> !insuranceBtn.disabled && takeInsurance());
  $$('.chip').forEach(btn=>btn.addEventListener('click', ()=>{
    let v=parseInt(betInput.value||25,10); const t=btn.dataset.chip;
    if(t==='max') v=Math.min(OPT.maxBet, bank); else v+=parseInt(t,10);
    v = clamp(v, OPT.minBet, Math.min(OPT.maxBet, bank)); betInput.value=v;
  }));

  // init
  shoe = buildShoe(OPT.decks); updateShoeInfo(); ruleText.textContent= OPT.S17 ? 'S17' : 'H17';
  updateBank(); resetTableUI();

})();
</script>
</body>
</html>
