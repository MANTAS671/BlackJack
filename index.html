<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üêí –û–±–µ–∑—å—è–Ω—ã–π –ë–ª—ç–∫–¥–∂–µ–∫ üé∞</title>
  <style>
    @keyframes bgPan { 0% { background-position: 0% 0%; } 50% { background-position: 50% 30%; } 100% { background-position: 100% 0%; } }
    body {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: url('https://source.unsplash.com/1600x900/?monkey,jungle') center/cover no-repeat;
      animation: bgPan 60s ease-in-out infinite alternate;
      display: flex; flex-direction: column; align-items: center;
      color: #fff; text-shadow: 1px 1px 3px #000;
    }
    h1 { margin: 20px 0; font-size: 2.5em; letter-spacing: 2px; text-transform: uppercase; }
    #balance { margin-bottom: 10px; font-size: 1.2em; }
    #game {
      background: rgba(0, 0, 0, 0.7); padding: 25px; border-radius: 15px;
      box-shadow: 0 0 20px rgba(0,0,0,0.9); max-width: 650px; width: 95%;
    }
    .hand { display: flex; justify-content: center; margin: 15px 0; min-height: 120px; }
    .card {
      width: 80px; height: 115px; margin: 0 6px;
      transform: rotateY(90deg); transform-style: preserve-3d;
      transition: transform 0.6s ease; backface-visibility: hidden;
    }
    .card.show { transform: rotateY(0deg); }
    #controls { text-align: center; margin: 20px 0; }
    #controls button {
      margin: 5px; padding: 12px 25px; font-size: 1em; font-weight: bold;
      text-transform: uppercase; border: none; border-radius: 8px;
      cursor: pointer; background: rgba(255,255,255,0.2); color: #fff;
      transition: background 0.3s, transform 0.1s;
    }
    #controls button:hover:not(:disabled) { background: rgba(255,255,255,0.4); }
    #controls button:active:not(:disabled) { transform: scale(0.95); }
    #controls button:disabled { opacity: 0.4; cursor: not-allowed; }
    #status { margin-top: 15px; font-size: 1.2em; min-height: 1.4em; }
  </style>
</head>
<body>
  <h1>üêí –û–±–µ–∑—å—è–Ω—ã–π –ë–ª—ç–∫–¥–∂–µ–∫ üé∞</h1>
  <div id="balance">–ë–∞–ª–∞–Ω—Å: <span id="banana-balance">100</span> üçå</div>
  <div id="game">
    <div><strong>–î–∏–ª–µ—Ä:</strong> <span id="dealer-score">0</span></div>
    <div class="hand" id="dealer-hand"></div>
    <div><strong>–ò–≥—Ä–æ–∫:</strong> <span id="player-score">0</span></div>
    <div class="hand" id="player-hand"></div>
    <div id="controls">
      <button id="btn-hit">–í–∑—è—Ç—å</button>
      <button id="btn-stand">–°—Ç–æ–ø</button>
      <button id="btn-double">–£–¥–≤–æ–∏—Ç—å</button>
      <button id="btn-split">–†–∞–∑–¥–µ–ª–∏—Ç—å</button>
      <button id="btn-new">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </div>
    <div id="status"></div>
  </div>
  <script>
    const deckBaseUrl = 'https://deckofcardsapi.com/static/img/';
    let deck = [], playerHand = [], dealerHand = [], currentHand = 'player';
    let bananaBalance = 100, betAmount = 10;
    let canSplit = false, doubled = false;
    const monkeyComments = {
      start: ['–•–∞-—Ö–∞, –¥—É–º–∞–µ—à—å —Å–º–æ–∂–µ—à—å –º–µ–Ω—è –æ–±—ã–≥—Ä–∞—Ç—å?', '–ü–æ—á—É–≤—Å—Ç–≤—É–π –º–æ—â—å –±–∞–Ω–∞–Ω–æ–≤!', '–Ø –≥–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ, –º–∞–ª–µ–Ω—å–∫–∏–π —á–µ–ª–æ–≤–µ–∫!'],
      hit: ['–ï—â—ë –∫–∞—Ä—Ç—É? –î–µ—Ä–∑–∞–π!', '–ù–µ —Ç–æ—Ä–æ–ø–∏—Å—å, –ø–æ–¥—É–º–∞–π –µ—â—ë!', '–ë—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–µ–Ω, –¥—Ä—É–≥!'],
      stand: ['–°—Ç–æ–ø? –ù—É-–Ω—É...', '–¢—ã —Å–¥–∞—ë—à—å—Å—è? –°–ª–∞–±–∞–∫!', '–ñ–¥—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...'],
      win: ['–£—Ö —Ç—ã, —Ç—ã –≤—ã–∏–≥—Ä–∞–ª... –ù—É –ª–∞–¥–Ω–æ.', '–ß—ë—Ä—Ç, –ø–æ–≤–µ–∑–ª–æ —Ç–µ–±–µ!', '–•–º–º, –∑–∞—Å—á–∏—Ç—ã–≤–∞—é!'],
      lose: ['–û–±–µ–∑—å—è–Ω–∞ –≤–∞—Å –≤—ã–∏–≥—Ä–∞–ª–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. –í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –±–∞–Ω–∞–Ω—ã.', '–ú–æ–π —Ç—Ä–∏—É–º—Ñ! –í–∞—à–∏ –±–∞–Ω–∞–Ω—ã –º–æ–∏!', '–©–∞ —è –≤–æ–∑—å–º—É —Ç–≤–æ—é –µ–¥—É! –ë–∞—Ö–∞—Ö–∞—Ö–∞!'],
      push: ['–ù–∏—á—å—è! –°–µ–≥–æ–¥–Ω—è –Ω–µ –º–æ–π –¥–µ–Ω—å.', '–ù–∏—á—å—è. –í–æ–∑—å–º–∏ –µ—â—ë –±–∞–Ω–∞–Ω–æ–≤ –∏ –≤–µ—Ä–Ω–∏—Å—å!', '–ö–∞—Ä—Ç–∞ –ª–µ–≥–ª–∞! –ù–∏—á—å—è.']
    };
    function getRandomComment(type) { const arr = monkeyComments[type]; return arr[Math.floor(Math.random()*arr.length)]; }

    function buildDeck() {
      const suits = { '‚ô†': 'S', '‚ô•': 'H', '‚ô¶': 'D', '‚ô£': 'C' };
      const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K']; deck = [];
      Object.entries(suits).forEach(([sym, code]) => values.forEach(v => {
        const codeV = v==='10'?'0'+code:v+code;
        deck.push({ suitSym: sym, code: codeV, value: v });
      }));
    }
    function shuffle() { for (let i=deck.length-1; i>0; i--){const j=Math.floor(Math.random()*(i+1));[deck[i],deck[j]]=[deck[j],deck[i]];} }
    function draw(){ let c=deck.pop(); if(!c){ buildDeck(); shuffle(); c=deck.pop(); } return c; }
    function handValue(hand){ let sum=0, aces=0; hand.forEach(c=>{ if(!c||!c.value) return; if(['J','Q','K'].includes(c.value)) sum+=10; else if(c.value==='A'){sum+=11; aces++;} else sum+=Number(c.value);}); while(sum>21&&aces>0){sum-=10; aces--;} return sum; }
    function renderHand(container,hand){container.innerHTML=''; hand.forEach((c,idx)=>{ if(!c||!c.code) return; const img=document.createElement('img'); img.className='card'; img.alt=`${c.value}${c.suitSym}`; img.src=`${deckBaseUrl}${c.code}.png`; container.appendChild(img); setTimeout(()=>img.classList.add('show'),idx*150); });}
    function update(){ document.getElementById('banana-balance').innerText = bananaBalance; document.getElementById('player-score').innerText=handValue(playerHand); document.getElementById('dealer-score').innerText=currentHand==='dealer'?handValue(dealerHand):'?'; renderHand(document.getElementById('player-hand'),playerHand); renderHand(document.getElementById('dealer-hand'),dealerHand); canSplit=playerHand.length===2&&playerHand[0]?.value===playerHand[1]?.value; document.getElementById('btn-split').disabled=!canSplit; document.getElementById('btn-double').disabled=playerHand.length!==2||doubled; }
    function endGame(msgType){ const msg=getRandomComment(msgType); document.getElementById('status').innerText = msg; ['btn-hit','btn-stand','btn-double','btn-split'].forEach(id=>document.getElementById(id).disabled=true); document.getElementById('dealer-score').innerText = handValue(dealerHand); }
    function dealerPlay(){ while(handValue(dealerHand)<17){ const c=draw(); if(c) dealerHand.push(c); else break; } }
    function compare(){ const pv=handValue(playerHand), dv=handValue(dealerHand); if(pv>21){ bananaBalance-=betAmount; return 'lose'; } if(dv>21){ bananaBalance+=betAmount; return 'win'; } if(pv===dv) return 'push'; if(pv>dv){ bananaBalance+=betAmount; return 'win'; } else { bananaBalance-=betAmount; return 'lose'; }}
    document.getElementById('btn-hit').onclick=()=>{ playerHand.push(draw()); update(); document.getElementById('status').innerText=getRandomComment('hit'); if(handValue(playerHand)>21){ currentHand='dealer'; dealerPlay(); endGame(compare()); }};
    document.getElementById('btn-stand').onclick=()=>{ currentHand='dealer'; dealerPlay(); const result=compare(); endGame(result); };
    document.getElementById('btn-double').onclick=()=>{ playerHand.push(draw()); doubled=true; betAmount*=2; update(); currentHand='dealer'; dealerPlay(); endGame(compare()); };
    document.getElementById('btn-split').onclick=()=>{ if(canSplit){ playerHand=[playerHand[0],draw()||playerHand[0]]; update(); document.getElementById('status').innerText='–†–∞–∑–¥–µ–ª–∏–ª–∏! –ò–≥—Ä–∞–µ–º –ø–µ—Ä–≤—É—é.';} };
    document.getElementById('btn-new').onclick=initGame;
    function initGame(){ buildDeck(); shuffle(); playerHand=[draw(),draw()].filter(Boolean); dealerHand=[draw(),draw()].filter(Boolean); currentHand='player'; betAmount=10; doubled=false; document.getElementById('status').innerText=getRandomComment('start'); ['btn-hit','btn-stand','btn-double','btn-split'].forEach(id=>document.getElementById(id).disabled=false); update(); }
    window.onload=initGame;
  </script>
</body>
</html>
